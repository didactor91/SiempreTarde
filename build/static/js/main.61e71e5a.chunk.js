(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){},28:function(e,t,n){e.exports=n(61)},33:function(e,t,n){},34:function(e,t,n){},42:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(24),o=n.n(i),s=(n(33),n(3)),c=n(13),l=n(5),u=n(2),m=n(4),p={set language(e){localStorage.lang=e},get language(){return localStorage.lang||"ca"}};n(22);var d=function(e){var t=e.lang,n=e.onLanguageChange;return r.a.createElement("div",{className:"main-language select field"},r.a.createElement("select",{onChange:function(e){return n(e.target.value)},value:t},r.a.createElement("option",{value:"ca"},"Catal\xe0"),r.a.createElement("option",{value:"es"},"Espa\xf1ol"),r.a.createElement("option",{value:"en"},"English")))},h={en:{register:"Register",or:"or",login:"Login",welcome:"Welcome to SiempreTarde"},es:{register:"Reg\xedstrate",or:"o",login:"Inicia sesi\xf3n",welcome:"Bienvenido a SiempreTarde"},ca:{register:"Registra't",or:"o",login:"Inicia sessi\xf3",welcome:"Benvingut a SiempreTarde"}},f=(n(34),n(7)),_=n.n(f);var v=function(e){var t=e.lang,n=e.onRegister,a=e.onLogin,i=h[t],o=i.welcome,s=i.register,c=(i.or,i.login);return r.a.createElement("main",{className:"main-landing"},r.a.createElement("section",{className:"heroTitle"},r.a.createElement("h1",null,o,r.a.createElement("p",null,_()(" \ud83d\ude8c\ud83d\udca8 ... \ud83c\udfc3\ud83c\udffb\u200d\u2640\ufe0f\ud83c\udfc3\ud83c\udffb\u200d\u2642\ufe0f")))),r.a.createElement("section",{className:"buttons-landing buttons is-10-desktop is-10-tablet is-10-mobile is-offset-one-quarter"},r.a.createElement("button",{className:"button-landing button is-primary is-large is-rounded",onClick:function(){return n()}},s),r.a.createElement("button",{className:"button-landing button is-primary is-large is-rounded",onClick:function(){return a()}},c)))},b={en:{title:"Register",name:"Name",surname:"Surname",email:"E-mail",password:"Password",password2:"Repeat password",back:"Go back",reset:"Reset"},es:{title:"Registro",name:"Nombre",surname:"Apellidos",email:"Correo electr\xf3nico",password:"Contrase\xf1a",password2:"Repite la contrase\xf1a",back:"Atras",reset:"Borrar"},ca:{title:"Registre",name:"Nom",surname:"Cognoms",email:"Adre\xe7a electr\xf2nica",password:"Contrasenya",password2:"Repiteix la contrasenya",back:"Endarrera",reset:"Esborrar"}},g=(n(42),n(1));var E=function(e){var t=e.lang,n=e.onRegister,a=e.error,i=b[t],o=i.title,s=i.name,c=i.surname,l=i.email,u=i.password,m=i.password2,p=i.reset,d=i.back;return r.a.createElement("section",{className:"main-register"},r.a.createElement("div",{className:"register-container"},r.a.createElement(g.b,{to:"/"},r.a.createElement("button",{className:"button is-rounded is-primary is-outlined"},d)),r.a.createElement("h2",{className:"title"},o),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target,a=t.name.value,r=t.surname.value,i=t.username.value,o=t.password.value,s=t.password2.value;n(a,r,i,o,s)}},r.a.createElement("input",{className:"input field",type:"text",name:"name",placeholder:s,autoFocus:!0}),r.a.createElement("input",{className:"input field",type:"text",name:"surname",placeholder:c}),r.a.createElement("input",{className:"input field",type:"email",name:"username",placeholder:l}),r.a.createElement("input",{className:"input field",type:"password",name:"password",placeholder:u}),r.a.createElement("input",{className:"input field",type:"password",name:"password2",placeholder:m}),r.a.createElement("input",{className:"button is-rounded is-primary",type:"submit",value:o}),r.a.createElement("input",{className:"button is-rounded is-primary",type:"reset",value:p}),r.a.createElement("span",{className:"help is-danger"},a))))},y={en:{title:"Login",email:"E-mail",password:"Password",back:"Go back",reset:"Reset"},es:{title:"Iniciar sesi\xf3n",email:"Correo electr\xf3nico",password:"Contrase\xf1a",password2:"Repite la contrase\xf1a",back:"Atras",reset:"Borrar"},ca:{title:"Iniciar sessi\xf3",email:"Adre\xe7a electr\xf2nica",password:"Contrasenya",password2:"Repiteix la contrasenya",back:"Endarrera",reset:"Esborrar"}};n(51);var N=function(e){var t=e.lang,n=e.onLogin,a=e.error,i=y[t],o=i.title,s=i.email,c=i.password,l=i.reset,u=i.back;return r.a.createElement("section",{className:"main-login"},r.a.createElement("div",{className:"login-container"},r.a.createElement(g.b,{to:"/"},r.a.createElement("button",{className:"button is-rounded is-primary is-outlined"},u)),r.a.createElement("h2",{className:"title"},o),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target,a=t.username.value,r=t.password.value;n(a,r)}},r.a.createElement("input",{className:"input field",type:"email",name:"username",placeholder:s,autoFocus:!0}),r.a.createElement("input",{className:"input field",type:"password",name:"password",placeholder:c}),r.a.createElement("input",{className:"button is-rounded is-primary",type:"submit",value:o}),r.a.createElement("input",{className:"button is-rounded is-primary",type:"reset",value:l}),r.a.createElement("span",{className:"help is-danger"},a))))},S=n(16),w={undefinedOrNull:function(e){return"null"===e?null:"undefined"!==e?e:void 0}},O=n(11),k=function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),t}(Object(O.a)(Error)),I=function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),t}(Object(O.a)(Error)),j=function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),t}(Object(O.a)(Error)),L=function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),t}(Object(O.a)(Error)),P=function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),t}(Object(O.a)(Error)),A=function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),t}(Object(O.a)(Error)),C=function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),t}(Object(O.a)(Error)),B=function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),t}(Object(O.a)(Error)),F=function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),t}(Object(O.a)(Error)),T=function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),t}(Object(O.a)(Error)),R={arguments:function(e){e.forEach(function(e){var t=e.name,n=e.value,a=e.type,r=e.notEmpty,i=e.optional;if(void 0!==n){if(typeof n!==a)throw TypeError("".concat(t," ").concat(n," is not a ").concat(a));if(r)if("string"===a){if(!n.trim().length)throw new k("".concat(t," is empty"))}else if("object"===a&&!Object.keys(n).length)throw new k("".concat(t," is empty"))}else if(!i)throw new j("".concat(t," is not optional"))})},email:function(e){if(!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e)))throw new I("".concat(e," is not an e-mail"))},url:function(e){if(!/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(String(e)))throw new I("".concat(e," is not a url"))}},D=n(27);var x=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.method,r=void 0===a?"GET":a,i=n.headers,o=n.body,s=n.timeout,c=void 0===s?0:s;if(R.arguments([{name:"url",value:e,type:"string",notEmpty:!0},{name:"method",value:r,type:"string",notEmpty:!0},{name:"headers",value:i,type:"object",optional:!0},{name:"body",value:o,type:"string",notEmpty:!0,optional:!0},{name:"timeout",value:c,type:"number",notEmpty:!0,optional:!0}]),R.url(e),c){var l=new AbortController;t=l.signal,setTimeout(function(){return l.abort()},c)}return fetch(e,{method:r,headers:i,body:o,signal:t}).catch(function(e){throw e instanceof TypeError?new P("cannot connect"):e instanceof DOMException?new A("time out, exceeded limit of ".concat(c,"ms")):e})},U={__url__:"https://skylabcoders.herokuapp.com/api",__timeout__:0,create:function(e,t,n){return R.arguments([{name:"username",value:e,type:"string",notEmpty:!0},{name:"password",value:t,type:"string",notEmpty:!0},{name:"data",value:n,type:"object",notEmpty:!0,optional:!0}]),x("".concat(this.__url__,"/user"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(D.a)({username:e,password:t},n)),timeout:this.__timeout__}).then(function(e){return e.json()})},authenticate:function(e,t){return R.arguments([{name:"username",value:e,type:"string",notEmpty:!0},{name:"password",value:t,type:"string",notEmpty:!0}]),x("".concat(this.__url__,"/auth"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t}),timeout:this.__timeout__}).then(function(e){return e.json()})},retrieve:function(e,t){return R.arguments([{name:"id",value:e,type:"string",notEmpty:!0},{name:"token",value:t,type:"string",notEmpty:!0}]),x("".concat(this.__url__,"/user/").concat(e),{headers:{Authorization:"Bearer ".concat(t)},timeout:this.__timeout__}).then(function(e){return e.json()})},update:function(e,t,n){return R.arguments([{name:"id",value:e,type:"string",notEmpty:!0},{name:"token",value:t,type:"string",notEmpty:!0},{name:"data",value:n,type:"object",notEmpty:!0}]),x("".concat(this.__url__,"/user/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(n),timeout:this.__timeout__}).then(function(e){return e.json()})}},K={APP_ID:null,APP_KEY:null,__url__:"https://api.tmb.cat/v1/ibus",__timeout__:0,retrieveStopId:function(e){return R.arguments([{name:"stop",value:e,type:"number",notEmpty:!0,optional:!1}]),x("".concat(this.__url__,"/stops/").concat(e,"?app_id=").concat(this.APP_ID,"&app_key=").concat(this.APP_KEY),{timeout:this.__timeout__}).then(function(e){if(200===e.status)return e.json();if(404===e.status)throw new F("cannot found");if(403===e.status)throw new P("cannot connect")}).then(function(e){if(void 0===e.data.ibus)throw new L("no data recived");return e})},retrieveLineId:function(e,t){return R.arguments([{name:"stop",value:e,type:"number",notEmpty:!0,optional:!1},{name:"line",value:t,type:"number",notEmpty:!0,optional:!1}]),x("".concat(this.__url__,"/lines/").concat(t,"/stops/").concat(e,"?app_id=").concat(this.APP_ID,"&app_key=").concat(this.APP_KEY),{timeout:this.__timeout__}).then(function(e){if(200===e.status)return e.json();if(404===e.status)throw new F("cannot found");if(403===e.status)throw new P("cannot connect")}).then(function(e){if(void 0===e.data.ibus)throw new L("no data recived");return e})}},V={APP_ID:null,APP_KEY:null,__url_lines__:"https://api.tmb.cat/v1/transit/linies/bus",__url_stops__:"https://api.tmb.cat/v1/transit/parades/",__timeout__:0,retrieveBusLine:function(e){var t;return R.arguments([{name:"line",value:e,type:"number",notEmpty:!0,optional:!0}]),t=e||"",x("".concat(this.__url_lines__,"/").concat(t,"?app_id=").concat(this.APP_ID,"&app_key=").concat(this.APP_KEY),{timeout:this.__timeout__}).then(function(e){if(200===e.status)return e.json();if(404===e.status)throw new F("cannot found");if(403===e.status)throw new P("cannot connect")}).then(function(e){if(0===e.totalFeatures)throw new F("cannot found");return e})},retrieveBusLineRoute:function(e){return R.arguments([{name:"line",value:e,type:"number",notEmpty:!0,optional:!1}]),x("".concat(this.__url_lines__,"/").concat(e,"/recs?app_id=").concat(this.APP_ID,"&app_key=").concat(this.APP_KEY),{timeout:this.__timeout__}).then(function(e){if(200===e.status)return e.json();if(404===e.status)throw new F("cannot found");if(403===e.status)throw new P("cannot connect")}).then(function(e){if(0===e.totalFeatures)throw new F("cannot found");return e})},retrieveBusStops:function(e){R.arguments([{name:"line",value:e,type:"number",notEmpty:!0,optional:!1}]);return e&&e,x("".concat(this.__url_lines__,"/").concat(e,"/parades?app_id=").concat(this.APP_ID,"&app_key=").concat(this.APP_KEY),{timeout:this.__timeout__}).then(function(e){if(200===e.status)return e.json();if(404===e.status)throw new F("cannot found");if(403===e.status)throw new P("cannot connect")}).then(function(e){if(0===e.totalFeatures)throw new F("cannot found");return e})},retrieveStop:function(e){return R.arguments([{name:"stop",value:e,type:"number",notEmpty:!0,optional:!1}]),x("".concat(this.__url_stops__,"/").concat(e,"?app_id=").concat(this.APP_ID,"&app_key=").concat(this.APP_KEY),{timeout:this.__timeout__}).then(function(e){if(200===e.status)return e.json();if(404===e.status)throw new F("cannot found");if(403===e.status)throw new P("cannot connect")}).then(function(e){if(0===e.totalFeatures)throw new F("cannot found");return e})}},G={set __userId__(e){sessionStorage.userId=e},get __userId__(){return w.undefinedOrNull(sessionStorage.userId)},set __userToken__(e){sessionStorage.userToken=e},get __userToken__(){return w.undefinedOrNull(sessionStorage.userToken)},get isUserLoggedIn(){return!(!this.__userId__||!this.__userToken__)},registerUser:function(e,t,n,a,r){if(R.arguments([{name:"name",value:e,type:"string",notEmpty:!0},{name:"surname",value:t,type:"string",notEmpty:!0},{name:"email",value:n,type:"string",notEmpty:!0},{name:"password",value:a,type:"string",notEmpty:!0},{name:"password2",value:r,type:"string",notEmpty:!0}]),R.email(n),a!==r)throw new B("Password don't match");return U.create(n,a,{name:e,surname:t}).then(function(e){if("OK"!==e.status)throw new C(e.error)})},loginUser:function(e,t){var n=this;return R.arguments([{name:"email",value:e,type:"string",notEmpty:!0},{name:"password",value:t,type:"string",notEmpty:!0}]),R.email(e),U.authenticate(e,t).then(function(e){if("OK"!==e.status)throw new C(e.error);var t=e.data,a=t.id,r=t.token;n.__userId__=a,n.__userToken__=r})},retrieveUser:function(){return U.retrieve(this.__userId__,this.__userToken__).then(function(e){if("OK"===e.status){var t=e.data;return{name:t.name,surname:t.surname,email:t.username}}throw new C(e.error)})},logoutUser:function(){sessionStorage.clear()},toggleFavStop:function(e){var t=this;return R.arguments([{name:"stop",value:e,type:"number"}]),U.retrieve(this.__userId__,this.__userToken__).then(function(n){var a=n.status,r=n.data;if("OK"===a){var i=r.aldiFavorites,o=void 0===i?[]:i,s=o.indexOf(e);return s<0?o.push(e):o.splice(s,1),U.update(t.__userId__,t.__userToken__,{aldiFavorites:o}).then(function(){})}throw new C(n.error)})},retrieveFavStops:function(){return U.retrieve(this.__userId__,this.__userToken__).then(function(e){var t=e.status,n=e.data;if("OK"===t){var a=n.aldiFavorites,r=void 0===a?[]:a;if(r.length){var i=r.map(function(e){return V.retrieveStop(e)});return Promise.all(i).then(function(e){return e.map(function(e){var t=Object(S.a)(e.features,1)[0].properties;return{stop_id:t.CODI_PARADA,stop_name:t.NOM_PARADA}})})}return r}throw new C(e.error)})},retrieveBusLines:function(e){return R.arguments([{name:"line_id",value:e,type:"number",notEmpty:!0,optional:!0}]),V.retrieveBusLine(e).then(function(e){return e.features.map(function(e){var t=e.properties;return{line_id:t.CODI_LINIA,name_line:t.NOM_LINIA,desc_line:t.DESC_LINIA,origin_line:t.ORIGEN_LINIA,dest_line:t.DESTI_LINIA,color_line:t.COLOR_LINIA}})})},retrieveBusLineRoute:function(e){return R.arguments([{name:"line_id",value:e,type:"number",notEmpty:!0,optional:!1}]),V.retrieveBusLineRoute(e).then(function(e){return e.features.map(function(e){var t=e.properties;return{direction_id:t.SENTIT,direction_name:t.DESTI_SENTIT}})})},retrieveBusStops:function(e,t){if(R.arguments([{name:"line_id",value:e,type:"number",notEmpty:!0,optional:!1},{name:"direction_id",value:t,type:"string",notEmpty:!0,optional:!1}]),"A"!==t&&"T"!==t)throw new T("direction is not valid");return V.retrieveBusStops(e).then(function(e){var n=e.features,a=[];return n.forEach(function(e){var n=e.properties,r=n.CODI_PARADA,i=n.NOM_PARADA;n.SENTIT===t&&a.push({stop_id:r,stop_name:i})}),a})},upcomingBusesByStop:function(e){R.arguments([{name:"stop",value:e,type:"number",notEmpty:!0,optional:!1}]);var t=[],n="";return V.retrieveStop(e).then(function(t){var a=Object(S.a)(t.features,1)[0].properties.NOM_PARADA;return n=a,K.retrieveStopId(e)}).then(function(e){var n=e.data.ibus;if(0===n.length)throw new L("no data recived");return n.map(function(e,n){var a=e.line,r=e["t-in-min"],i=e["t-in-s"],o=e["text-ca"];return t[n]={line:a,t_in_min:r,t_in_s:i,text_ca:o},V.retrieveBusLine()})}).then(function(e){return Promise.all(e).then(function(e){return e.map(function(e){return e.features.map(function(e){var t=e.properties;return{line_id:t.CODI_LINIA,name_line:t.NOM_LINIA,desc_line:t.DESC_LINIA,origin_line:t.ORIGEN_LINIA,dest_line:t.DESTI_LINIA,color_line:t.COLOR_LINIA}})})})}).then(function(a){var r=[];return a.map(function(a,i){for(var o=!1,s=0,c="#000000",l="",u="",m="",p="";s<a.length&&!o;)a[s].name_line===t[i].line?(c=a[s].color_line,l=a[s].dest_line,u=a[s].name_line,m=a[s].desc_line,p=a[s].origin_line,o=!0):s++;r.push({line:t[i].line,t_in_min:t[i].t_in_min,t_in_s:t[i].t_in_s,text_ca:t[i].text_ca,color_line:c,dest_line:l,name_line:u,desc_line:m,origin_line:p,stop_id:e,stop_name:n})}),r})},upcomingBusesByStopAndLine:function(e,t){R.arguments([{name:"stop",value:e,type:"number",notEmpty:!0,optional:!1},{name:"line",value:t,type:"number",notEmpty:!0,optional:!1}]);var n=[],a=[];return K.retrieveLineId(e,t).then(function(e){var a=e.data.ibus;if(0===a.length)throw new L("no data recived");return a.map(function(e,a){var r=e["t-in-min"],i=e["t-in-s"],o=e["text-ca"];return n[a]={line_id:t,t_in_min:r,t_in_s:i,text_ca:o},V.retrieveBusLine(t)})}).then(function(e){return Promise.all(e).then(function(e){return e.map(function(e){return e.features.map(function(e){var t=e.properties;return{line_id:t.CODI_LINIA,name_line:t.NOM_LINIA,desc_line:t.DESC_LINIA,origin_line:t.ORIGEN_LINIA,dest_line:t.DESTI_LINIA,color_line:t.COLOR_LINIA}})})})}).then(function(t){return t.map(function(e){a.push({line:n[0].line_id,t_in_min:n[0].t_in_min,t_in_s:n[0].t_in_s,text_ca:n[0].text_ca,color_line:e[0].color_line,dest_line:e[0].dest_line,name_line:e[0].name_line,desc_line:e[0].desc_line,origin_line:e[0].origin_line})}),V.retrieveStop(e)}).then(function(e){var t=[],n=Object(S.a)(e.features,1)[0].properties,r=n.CODI_PARADA,i=n.NOM_PARADA;return t.push({line:a[0].line,t_in_min:a[0].t_in_min,t_in_s:a[0].t_in_s,text_ca:a[0].text_ca,color_line:a[0].color_line,dest_line:a[0].dest_line,name_line:a[0].name_line,desc_line:a[0].desc_line,origin_line:a[0].origin_line,stop_id:r,stop_name:i}),t})}},Y={en:{stopByCode:"Stop by Code",stopByLine:"Stop by Line",favoriteStops:"Favorites",title:"Next Bus",logout:"Log Out"},es:{stopByCode:"Parada por C\xf3digo",stopByLine:"Parada por linea",favoriteStops:"Favoritos",title:"Pr\xf3ximo Bus",logout:"Cerrar Sesi\xf3n"},ca:{stopByCode:"Parada per Codi",stopByLine:"Parada per linia",favoriteStops:"Preferits",title:"Proper Bus",logout:"Tancar Sessi\xf3"}};n(52);var M=function(e){var t=e.lang,n=e.onStopCode,a=e.onLineCode,i=e.onFavorites,o=e.onLogout,s=Y[t],c=s.title,l=s.stopByCode,u=s.stopByLine,m=s.favoriteStops,p=s.logout;return r.a.createElement("section",{className:"main-home"},r.a.createElement("section",{className:"buttons-landing buttons is-10-desktop is-10-tablet is-10-mobile is-offset-one-quarter"},r.a.createElement("h1",{className:"home-title"},r.a.createElement("p",null,_()(" \ud83d\udccd ... \ud83d\ude8d"),r.a.createElement("span",null,c))),r.a.createElement("section",{className:"button-section"},r.a.createElement("button",{className:"button-landing button is-primary is-large is-rounded",onClick:function(){return n()}},l),r.a.createElement("hr",null),r.a.createElement("button",{className:"button-landing button is-primary is-large is-rounded",onClick:function(){return a()}},u),r.a.createElement("hr",null),r.a.createElement("button",{className:"button-landing button is-primary is-large is-rounded",onClick:function(){return i()}},m),r.a.createElement("hr",null),r.a.createElement("button",{className:"button-landing button is-primary is-large is-rounded",onClick:function(){return o()}},p))))},z={en:{stop:"Stop Code",title:"Choose a Stop Number",submit:"Send",reset:"Reset",back:"Back"},es:{stop:"C\xf3digo Parada",welcome:"Introduzca N\xfamero Parada",submit:"Enviar",reset:"Borrar",back:"Volver atras"},ca:{stop:"Codi Parada",welcome:"Introdueixi N\xfamero de Parada",submit:"Enviar",reset:"Borrar",back:"Tornar endarrera"}};n(53);var J=function(e){var t=e.lang,n=e.onSearch,a=e.error,i=z[t],o=i.title,s=i.stop,c=i.submit,l=i.reset,u=i.back;return r.a.createElement("section",{className:"main-stopcode"},r.a.createElement("div",{className:"stopcode-container"},r.a.createElement(g.b,{to:"/"},r.a.createElement("button",{className:"button is-rounded is-primary is-outlined"},u)),r.a.createElement("h2",{className:"title is-4 has-text-centered"},o),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.stop_id.value,a=parseInt(t,10);n(a)}},r.a.createElement("input",{className:"input field",type:"number",name:"stop_id",placeholder:s,autoFocus:!0}),r.a.createElement("input",{className:"button is-rounded is-primary",type:"submit",value:c}),r.a.createElement("input",{className:"button is-rounded is-primary",type:"reset",value:l})),r.a.createElement("span",{className:"help is-danger"},a)))},W={en:{title1:"Bus Line",select:"Select Line",back:"Go Back"},es:{title1:"Linia",select:"Seleccionar Linea",back:"Volver atras"},ca:{title1:"Linia",select:"Seleccionar Linia",back:"Tornar endarrera"}};n(54);var q=function(e){var t=e.lang,n=e.onSearch,a=e.items,i=e.error,o=e.line_id,s=W[t],c=s.title1,l=s.select,u=s.back;return a.sort(function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(n,a){return(n[e]<a[e]?-1:n[e]>a[e]?1:0)*t}}("line_id")),r.a.createElement("section",{className:"main-stopline"},r.a.createElement("div",{className:"stopcode-container"},r.a.createElement(g.b,{to:"/"},r.a.createElement("button",{className:"button is-rounded is-primary is-outlined"},u)),r.a.createElement("div",null,r.a.createElement("h2",{className:"title is-4 has-text-centered"},c),r.a.createElement("div",{className:"select field"},r.a.createElement("select",{onChange:function(e){return n(e.target.value)},value:o},r.a.createElement("option",{key:"select"},l),a.map(function(e){var t=e.line_id,n=e.name_line,a=e.desc_line;return r.a.createElement("option",{key:t,value:t},n," - ",a)}))),r.a.createElement("span",{className:"help is-danger"},i))))},Q={en:{title1:"Bus Stop Information",back:"Go Back",fav:"Add to favorites",to:"to"},es:{title1:"Informaci\xf3n de la Parada",back:"Volver atras",fav:"A\xf1adir a favoritos",to:"a"},ca:{title1:"Informaci\xf3 de la Parada",back:"Tornar endarrera",fav:"Afegir a preferits",to:"a"}};n(55);var Z=function(e){var t=e.lang,n=e.items,a=e.stop,i=e.error,o=e.onFav,s=e.favs,c=Q[t],l=c.back,u=c.fav,m=c.to,p=s.some(function(e){return e.stop_id===a});return r.a.createElement("section",{className:"main-results"},r.a.createElement("div",{className:"results-container"},r.a.createElement(g.b,{to:"/byidstop"},r.a.createElement("button",{className:"button is-rounded is-primary is-outlined"},l)),!p&&r.a.createElement("button",{className:"button is-rounded is-primary",onClick:function(){return o(a)}},u),r.a.createElement("h2",{className:"title is-4 has-text-centered"}," ",a," - ",n[0].stop_name),r.a.createElement("ul",{className:"container"},n.map(function(e){var t=e.line,n=e.t_in_min,a=e.color_line,i=e.dest_line,o=e.name_line,s=e.desc_line,c={color:"#".concat(a)};return r.a.createElement("li",{className:"columns is-mobile is-centered",key:t},r.a.createElement("div",{className:"column is-6-mobile"},r.a.createElement("h2",{style:c},r.a.createElement("span",null,_()(" \ud83d\udccd")),o," - ",s," ",m," ",i)),r.a.createElement("div",{className:"column is-6-mobile"},r.a.createElement("h3",null,n," min",r.a.createElement("span",null,_()(" \ud83d\ude8c\ud83d\udca8\ud83d\udca8")))))})),r.a.createElement("span",{className:"help is-danger"},i)))},$=n(12),H={en:{title1:"Favorites",back:"Volver atras",fav:"Quit",see:"See time"},es:{title1:"Favoritos",back:"Volver atras",fav:"Quitar",see:"Ver tiempo"},ca:{back:"Tornar endarrera",title1:"Preferits",fav:"Treure",see:"Veure temps"}};n(56);var X=function(e){var t=e.lang,n=e.favs,a=e.error,i=e.onFavOut,o=e.onSee,s=H[t],c=s.title1,l=s.back,u=s.fav,m=s.see;return r.a.createElement("section",{className:"main-results"},r.a.createElement("div",{className:"results-container"},r.a.createElement(g.b,{to:"/"},r.a.createElement("button",{className:"button is-rounded is-primary is-outlined"},l)),r.a.createElement("h2",{className:"title is-4 has-text-centered"},c),r.a.createElement("ul",{className:"container"},n.map(function(e){var t=e.stop_id,n=e.stop_name;return r.a.createElement("li",{className:"columns is-mobile is-centered is-multiline",key:t},r.a.createElement("div",{className:"column is-12-mobile"},r.a.createElement("h2",null,r.a.createElement("span",null,_()(" \ud83d\udccd")),t," - ",n)),r.a.createElement("div",{className:"column is-12-mobile"},r.a.createElement("button",{className:"button is-rounded is-primary",onClick:function(){return i(t)}},u),r.a.createElement("button",{className:"button is-rounded is-primary",onClick:function(){return o(t)}},m)))})),r.a.createElement("span",{className:"help is-danger"},a)))},ee={en:{stop:"Stop Code",title:"Choose a Stop Number",submit:"Send",reset:"Reset",back:"Back"},es:{stop:"C\xf3digo Parada",welcome:"Introduzca N\xfamero Parada",submit:"Enviar",reset:"Borrar",back:"Volver atras"},ca:{stop:"Codi Parada",welcome:"Introdueixi N\xfamero de Parada",submit:"Enviar",reset:"Borrar",back:"Tornar endarrera"}},te=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:null,line:null,lines:[],stop:null,favs:[]},n.handleSearch=function(e){return G.upcomingBusesByStop(e).then(function(t){return G.retrieveFavStops().then(function(a){return n.setState({error:null,line:null,favs:a,lines:t,stop:e},function(){return n.props.history.push("/byidstop/results")})})}).catch(function(e){return n.setState({error:e.message})})},n.handleFav=function(e){return G.toggleFavStop(e).then(function(){return G.retrieveFavStops()}).then(function(e){return n.setState({favs:e})})},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.handleSearch,t=this.handleFav,n=this.state,a=n.lines,i=n.error,o=n.stop,s=n.favs,c=this.props.lang;ee[c].back;return r.a.createElement("main",null,r.a.createElement($.d,null,r.a.createElement($.b,{exact:!0,path:"/byidstop",render:function(){return G.isUserLoggedIn?r.a.createElement(J,{lang:c,onSearch:e,error:i}):r.a.createElement($.a,{to:"/"})}}),r.a.createElement($.b,{path:"/byidstop/results",render:function(){return G.isUserLoggedIn?r.a.createElement(Z,{lang:c,items:a,onFav:t,stop:o,error:i,favs:s}):r.a.createElement($.a,{to:"/"})}}),r.a.createElement($.a,{to:"/"})))}}]),t}(a.Component),ne=Object($.f)(te),ae={en:{stop:"Stop Code",title:"Choose a Stop Number",submit:"Send",reset:"Reset",back:"Back"},es:{stop:"C\xf3digo Parada",welcome:"Introduzca N\xfamero Parada",submit:"Enviar",reset:"Borrar",back:"Volver atras"},ca:{stop:"Codi Parada",welcome:"Introdueixi N\xfamero de Parada",submit:"Enviar",reset:"Borrar",back:"Tornar endarrera"}},re={en:{title1:"Bus Stop",lin:"Line",dir:"to",fav:"Add to favorites",back:"Go Back"},es:{title1:"Parada",lin:"Linea",dir:"a",fav:"A\xf1adir a favoritos",back:"Volver atras"},ca:{title1:"Parada",lin:"Linia",dir:"a",fav:"Afegir a preferits",back:"Tornar endarrera"}};n(57);var ie=function(e){var t=e.lang,n=e.stop,a=e.onFav,i=e.favs,o=e.error,s=re[t],c=s.title1,l=s.lin,u=s.dir,m=s.back,p=s.fav,d=i.some(function(e){return e.stop_id===n[0].stop_id});return r.a.createElement("section",{className:"main-results-line"},r.a.createElement("div",{className:"results-line-container"},r.a.createElement(g.b,{to:"/"},r.a.createElement("button",{className:"button is-rounded is-primary is-outlined"},m)),!d&&r.a.createElement("button",{className:"button is-rounded is-primary",onClick:function(){return a(n[0].stop_id)}},p),r.a.createElement("h2",{className:"title is-4 has-text-centered"},c," ",n[0].stop_id,": ",n[0].stop_name),r.a.createElement("ul",{className:"container"},n.map(function(e){var t=e.line,n=e.t_in_min,a=e.color_line,i=e.dest_line,o={color:"#".concat(a)};return r.a.createElement("li",{className:"columns is-mobile is-centered",key:t},r.a.createElement("div",{className:"column is-6-mobile"},r.a.createElement("h2",{style:o}," ",r.a.createElement("span",null,_()(" \ud83d\udccd")),l," ",t," ",u," ",i)),r.a.createElement("div",{className:"column is-6-mobile"},r.a.createElement("h3",null,n," min",r.a.createElement("span",null,_()(" \ud83d\ude8c\ud83d\udca8\ud83d\udca8"))," ")))})),r.a.createElement("span",{className:"help is-danger"},o)))},oe={en:{title1:"Bus Direction",select:"Select Direction",back:"Go Back"},es:{title1:"Sentido",select:"Seleccionar Sentido",back:"Volver atras"},ca:{title1:"Sentit",select:"Seleccionar Sentit",back:"Tornar endarrera"}};n(58);var se=function(e){var t=e.lang,n=e.onSearch,a=e.items,i=e.error,o=e.direction_id,s=oe[t],c=s.title1,l=s.select,u=s.back;return r.a.createElement("section",{className:"main-stopline2"},r.a.createElement("div",{className:"stopcode2-container"},r.a.createElement(g.b,{to:"/"},r.a.createElement("button",{className:"button is-rounded is-primary is-outlined"},u)),r.a.createElement("div",null,r.a.createElement("h2",{className:"title is-4 has-text-centered"},c),r.a.createElement("div",{className:"select field"},r.a.createElement("select",{onChange:function(e){return n(e.target.value)},value:o},r.a.createElement("option",{key:"select"},l),a.map(function(e){var t=e.direction_id,n=e.direction_name;return r.a.createElement("option",{key:t,value:t},t," - ",n)})),r.a.createElement("span",{className:"help is-danger"},i)))))},ce={en:{title1:"Bus Stop",select:"Select Stop",back:"Go Back"},es:{title1:"Parada",select:"Seleccionar Parada",back:"Volver atras"},ca:{title1:"Parada",select:"Seleccionar Parada",back:"Tornar endarrera"}};n(59);var le=function(e){var t=e.lang,n=e.onSearch,a=e.items,i=e.error,o=e.stop_id,s=ce[t],c=s.title1,l=s.select,u=s.back;return a.sort(function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(n,a){return(n[e]<a[e]?-1:n[e]>a[e]?1:0)*t}}("stop_id")),r.a.createElement("section",{className:"main-stopline3"},r.a.createElement("div",{className:"stopline3-container"},r.a.createElement(g.b,{to:"/"},r.a.createElement("button",{className:"button is-rounded is-primary is-outlined"},u)),r.a.createElement("div",null,r.a.createElement("h2",{className:"title is-4 has-text-centered"},c),r.a.createElement("div",{className:"select field"},r.a.createElement("select",{onChange:function(e){return n(e.target.value)},value:o},r.a.createElement("option",{key:"select"},l),a.map(function(e){var t=e.stop_id,n=e.stop_name;return r.a.createElement("option",{key:t,value:t},t," - ",n)})),r.a.createElement("span",{className:"help is-danger"},i)))))},ue=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:null,line_id:null,lines:[],stop:null,directions:[],direction:null,favs:[]},n.handleLineSearch=function(e){return e=Number(e),G.retrieveBusLineRoute(e).then(function(t){return n.setState({error:null,directions:t,line_id:e},function(){return n.props.history.push("/byidline/directions")})}).catch(function(e){return n.setState({error:e.message})})},n.handleDirectionSearch=function(e){G.retrieveBusStops(n.state.line_id,e).then(function(e){return n.setState({error:null,lines:e},function(){return n.props.history.push("/byidline/stops")})}).catch(function(e){return n.setState({error:e.message})})},n.handleStopSearch=function(e){return e=Number(e),G.upcomingBusesByStopAndLine(e,n.state.line_id).then(function(e){return G.retrieveFavStops().then(function(t){return n.setState({error:null,line:null,favs:t,stop:e},function(){return n.props.history.push("/byidline/results")})})}).catch(function(e){return n.setState({error:e.message})})},n.handleFav=function(e){return G.toggleFavStop(e).then(function(){return G.retrieveFavStops()}).then(function(e){return n.setState({favs:e})})},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.handleLineSearch,t=this.handleDirectionSearch,n=this.handleStopSearch,a=this.handleFav,i=this.state,o=i.lines,s=i.error,c=i.stop,l=i.directions,u=i.favs,m=this.props,p=m.lang,d=m.items;ae[p].back;return r.a.createElement("main",null,r.a.createElement($.d,null,r.a.createElement($.b,{exact:!0,path:"/byidline",render:function(){return G.isUserLoggedIn?r.a.createElement(q,{lang:p,items:d,onSearch:e,error:s}):r.a.createElement($.a,{to:"/"})}}),r.a.createElement($.b,{path:"/byidline/directions",render:function(){return G.isUserLoggedIn?r.a.createElement(se,{lang:p,items:l,onSearch:t,error:s}):r.a.createElement($.a,{to:"/"})}}),r.a.createElement($.b,{path:"/byidline/stops",render:function(){return G.isUserLoggedIn?r.a.createElement(le,{lang:p,items:o,onSearch:n,error:s}):r.a.createElement($.a,{to:"/"})}}),r.a.createElement($.b,{path:"/byidline/results",render:function(){return G.isUserLoggedIn?r.a.createElement(ie,{lang:p,onFav:a,stop:c,error:s,favs:u}):r.a.createElement($.a,{to:"/"})}}),r.a.createElement($.a,{to:"/"})))}}]),t}(a.Component),me=Object($.f)(ue),pe={en:{title1:"Bus Stop Information",back:"Go Back",to:"to"},es:{title1:"Informaci\xf3n de la Parada",back:"Volver atras",to:"a"},ca:{title1:"Informaci\xf3 de la Parada",back:"Tornar endarrera",to:"a"}};n(60);var de=function(e){var t=e.lang,n=e.items,a=e.stop,i=e.error,o=(e.onFav,e.favs,pe[t]),s=o.back,c=o.to;return r.a.createElement("section",{className:"main-results"},r.a.createElement("div",{className:"results-container"},r.a.createElement(g.b,{to:"/"},r.a.createElement("button",{className:"button is-rounded is-primary is-outlined"},s)),r.a.createElement("h2",{className:"title is-4 has-text-centered"}," ",a," - ",n[0].stop_name),r.a.createElement("ul",{className:"container"},n.map(function(e){var t=e.line,n=e.t_in_min,a=e.color_line,i=e.dest_line,o=e.name_line,s=e.desc_line,l={color:"#".concat(a)};return r.a.createElement("li",{className:"columns is-mobile is-centered",key:t},r.a.createElement("div",{className:"column is-6-mobile"},r.a.createElement("h2",{style:l},r.a.createElement("span",null,_()(" \ud83d\udccd")),o," - ",s," ",c," ",i)),r.a.createElement("div",{className:"column is-6-mobile"},r.a.createElement("h3",null,n," min",r.a.createElement("span",null,_()(" \ud83d\ude8c\ud83d\udca8\ud83d\udca8")))))})),r.a.createElement("span",{className:"help is-danger"},i)))},he=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={lang:p.language,visible:null,error:null,line:null,stop:null,lines:[],favs:[]},n.handleLanguageChange=function(e){return n.setState({lang:p.language=e})},n.handleRegisterNavigation=function(){return n.props.history.push("/register")},n.handleLoginNavigation=function(){return n.props.history.push("/login")},n.handleLogin=function(e,t){try{G.loginUser(e,t).then(function(){return G.retrieveUser()}).then(function(e){var t=e.name;n.setState({name:t,error:null},function(){return n.props.history.push("/home")})}).catch(function(e){return n.setState({error:e.message})})}catch(r){var a=r.message;n.setState({error:a})}},n.handleRegister=function(e,t,a,r,i){try{G.registerUser(e,t,a,r,i).then(function(){n.setState({error:null},function(){return n.props.history.push("/login")})}).catch(function(e){n.setState({error:e.message})})}catch(s){var o=s.message;n.setState({error:o})}},n.handleStopCode=function(){n.setState(function(){return n.props.history.push("/byidstop")})},n.handleLineCode=function(){G.retrieveBusLines(void 0).then(function(e){n.setState({error:null,lines:e},function(){return n.props.history.push("/byidline")})})},n.handleFavorites=function(){G.retrieveFavStops().then(function(e){return n.setState({favs:e},function(){return n.props.history.push("/favoritestops")})})},n.handleFavOut=function(e){G.toggleFavStop(e).then(function(){return G.retrieveFavStops()}).then(function(e){return n.setState({favs:e},function(){return n.props.history.push("/favoritestops")})})},n.handleLogout=function(){G.logoutUser(),n.props.history.push("/")},n.handleFav=function(e){return G.toggleFavStop(e).then(function(){return G.retrieveFavStops()}).then(function(e){return n.setState({favs:e})})},n.handleSee=function(e){return G.upcomingBusesByStop(e).then(function(t){G.retrieveFavStops().then(function(a){return n.setState({error:null,line:null,favs:a,lines:t,stop:e},function(){return n.props.history.push("/favoritestops/results")})})}).catch(function(e){return n.setState({error:e.message})})},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;G.isUserLoggedIn&&G.retrieveUser().then(function(t){return e.setState({name:t.name})}).catch(function(t){return e.setState({error:t.message})})}},{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&this.setState({visible:null})}},{key:"render",value:function(){var e=this.state,t=e.lang,n=e.error,a=e.lines,i=(e.line,e.favs),o=e.stop,s=this.handleLanguageChange,c=this.handleRegisterNavigation,l=this.handleLoginNavigation,u=this.handleLogin,m=this.handleRegister,p=this.handleLogout,h=this.handleStopCode,f=this.handleLineCode,_=this.handleFavorites,b=this.handleFavOut,g=this.handleFav,y=this.handleSee;return r.a.createElement("div",{className:"main-app"},r.a.createElement(d,{lang:t,onLanguageChange:s}),r.a.createElement($.d,null,r.a.createElement($.b,{exact:!0,path:"/",render:function(){return G.isUserLoggedIn?r.a.createElement($.a,{to:"/home"}):r.a.createElement(v,{lang:t,onRegister:c,onLogin:l})}}),r.a.createElement($.b,{path:"/register",render:function(){return G.isUserLoggedIn?r.a.createElement($.a,{to:"/home"}):r.a.createElement(E,{lang:t,onRegister:m,error:n})}}),r.a.createElement($.b,{path:"/login",render:function(){return G.isUserLoggedIn?r.a.createElement($.a,{to:"/home"}):r.a.createElement(N,{lang:t,onLogin:u,error:n})}}),r.a.createElement($.b,{path:"/home",render:function(){return G.isUserLoggedIn?r.a.createElement(M,{lang:t,onStopCode:h,onLineCode:f,onFavorites:_,onLogout:p}):r.a.createElement($.a,{to:"/"})}}),r.a.createElement($.b,{path:"/byidstop",render:function(){return G.isUserLoggedIn?r.a.createElement(ne,{lang:t,items:a}):r.a.createElement($.a,{to:"/"})}}),r.a.createElement($.b,{path:"/byidline",render:function(){return G.isUserLoggedIn?r.a.createElement(me,{lang:t,items:a}):r.a.createElement($.a,{to:"/"})}}),r.a.createElement($.b,{exact:!0,path:"/favoritestops",render:function(){return G.isUserLoggedIn?r.a.createElement(X,{lang:t,favs:i,onFavOut:b,onSee:y,onFavorites:_,stop:o}):r.a.createElement($.a,{to:"/"})}}),r.a.createElement($.b,{exact:!0,path:"/favoritestops/results",render:function(){return G.isUserLoggedIn?r.a.createElement(de,{lang:t,items:a,onFav:g,stop:o,error:n,favs:i}):r.a.createElement($.a,{to:"/"})}}),r.a.createElement($.a,{to:"/"})))}}]),t}(a.Component),fe=Object($.f)(he);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));V.APP_ID="89d2372e",V.APP_KEY="d94caab45f16f23e4ab1925e7e4cbbb8",K.APP_ID="89d2372e",K.APP_KEY="d94caab45f16f23e4ab1925e7e4cbbb8",o.a.render(r.a.createElement(g.a,null,r.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,1,2]]]);
//# sourceMappingURL=main.61e71e5a.chunk.js.map