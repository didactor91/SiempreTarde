{"ast":null,"code":"var _jsxFileName = \"/Users/didactor/Documents/skylab/bootcamp/collab/skylab-bootcamp-201904/staff/groups/aldi/siempre-tarde/src/componets/LineSearch/index.js\";\nimport React, { Component } from 'react';\nimport literals from './literals';\nimport { Route, withRouter, Redirect, Switch, Link } from 'react-router-dom';\nimport logic from '../../logic';\nimport StopLine from '../StopLine';\nimport ResultsLine from '../ResultsLine';\nimport StopLine2 from '../StopLine2';\nimport StopLine3 from '../StopLine3';\n\nclass LineSearch extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      error: null,\n      line_id: null,\n      lines: [],\n      stop: null,\n      directions: [],\n      direction: null,\n      favs: []\n    };\n\n    this.handleLineSearch = line_id => {\n      line_id = Number(line_id);\n      return logic.retrieveBusLineRoute(line_id).then(directions => this.setState({\n        error: null,\n        directions,\n        line_id\n      }, () => this.props.history.push('/byidline/directions'))).catch(error => this.setState({\n        error: error.message\n      }));\n    };\n\n    this.handleDirectionSearch = direction_id => {\n      logic.retrieveBusStops(this.state.line_id, direction_id).then(lines => this.setState({\n        error: null,\n        lines\n      }, () => this.props.history.push('/byidline/stops'))).catch(error => this.setState({\n        error: error.message\n      }));\n    };\n\n    this.handleStopSearch = stop_id => {\n      stop_id = Number(stop_id);\n      return logic.upcomingBusesByStopAndLine(stop_id, this.state.line_id).then(stop => this.setState({\n        error: null,\n        stop\n      }, () => this.props.history.push('/byidline/results'))).catch(error => this.setState({\n        error: error.message\n      }));\n    };\n\n    this.handleFav = id => logic.toggleFavStop(id).then(() => logic.retrieveFavStops()).then(favs => this.setState({\n      favs\n    }));\n  }\n\n  render() {\n    const handleLineSearch = this.handleLineSearch,\n          handleDirectionSearch = this.handleDirectionSearch,\n          handleStopSearch = this.handleStopSearch,\n          handleFav = this.handleFav,\n          _this$state = this.state,\n          lines = _this$state.lines,\n          error = _this$state.error,\n          stop = _this$state.stop,\n          directions = _this$state.directions,\n          favs = _this$state.favs,\n          _this$props = this.props,\n          lang = _this$props.lang,\n          items = _this$props.items;\n    const back = literals[lang].back;\n    return React.createElement(\"main\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/byidline\",\n      render: () => logic.isUserLoggedIn ? React.createElement(StopLine, {\n        lang: lang,\n        items: items,\n        onSearch: handleLineSearch,\n        error: error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }) : React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/byidline/directions\",\n      render: () => logic.isUserLoggedIn ? React.createElement(StopLine2, {\n        lang: lang,\n        items: directions,\n        onSearch: handleDirectionSearch,\n        error: error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }) : React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/byidline/stops\",\n      render: () => logic.isUserLoggedIn ? React.createElement(StopLine3, {\n        lang: lang,\n        items: lines,\n        onSearch: handleStopSearch,\n        error: error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }) : React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/byidline/results\",\n      render: () => logic.isUserLoggedIn ? React.createElement(ResultsLine, {\n        lang: lang,\n        onFav: handleFav,\n        stop: stop,\n        error: error,\n        favs: favs,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }) : React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }), React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default withRouter(LineSearch);","map":{"version":3,"sources":["/Users/didactor/Documents/skylab/bootcamp/collab/skylab-bootcamp-201904/staff/groups/aldi/siempre-tarde/src/componets/LineSearch/index.js"],"names":["React","Component","literals","Route","withRouter","Redirect","Switch","Link","logic","StopLine","ResultsLine","StopLine2","StopLine3","LineSearch","state","error","line_id","lines","stop","directions","direction","favs","handleLineSearch","Number","retrieveBusLineRoute","then","setState","props","history","push","catch","message","handleDirectionSearch","direction_id","retrieveBusStops","handleStopSearch","stop_id","upcomingBusesByStopAndLine","handleFav","id","toggleFavStop","retrieveFavStops","render","lang","items","back","isUserLoggedIn"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport literals from './literals'\nimport { Route, withRouter, Redirect, Switch, Link } from 'react-router-dom'\nimport logic from '../../logic';\nimport StopLine from '../StopLine';\nimport ResultsLine from '../ResultsLine';\nimport StopLine2 from '../StopLine2';\nimport StopLine3 from '../StopLine3';\n\nclass LineSearch extends Component {\n    state = { error: null, line_id: null, lines: [], stop: null, directions: [], direction: null , favs:[]}\n\n    handleLineSearch = line_id => {\n        line_id = Number(line_id)\n        return logic.retrieveBusLineRoute(line_id)\n            .then((directions) =>\n                this.setState({ error: null, directions, line_id }, () => this.props.history.push('/byidline/directions'))\n            )\n            .catch(error =>\n                this.setState({ error: error.message })\n            )\n    }\n\n    handleDirectionSearch = direction_id => {\n        logic.retrieveBusStops(this.state.line_id, direction_id)\n            .then((lines) =>\n                this.setState({ error: null, lines }, () => this.props.history.push('/byidline/stops'))\n            )\n            .catch(error =>\n                this.setState({ error: error.message })\n            )\n    }\n\n    handleStopSearch = stop_id => {\n        stop_id = Number(stop_id)\n\n        return logic.upcomingBusesByStopAndLine(stop_id, this.state.line_id)\n            .then((stop) =>\n                this.setState({ error: null, stop }, () => this.props.history.push('/byidline/results'))\n            )\n            .catch(error =>\n                this.setState({ error: error.message })\n            )\n    }\n    handleFav = id =>\n        logic.toggleFavStop(id)\n            .then(() => logic.retrieveFavStops())\n            .then(favs => this.setState({ favs }))\n\n    render() {\n        const {\n            handleLineSearch,\n            handleDirectionSearch,\n            handleStopSearch,\n            handleFav,\n            state: { lines, error, stop, directions, favs },\n            props: { lang, items}\n        } = this\n\n        const { back } = literals[lang]\n\n        return <main>\n            <Switch>\n                <Route exact path=\"/byidline\" render={() => logic.isUserLoggedIn ? <StopLine lang={lang} items={items} onSearch={handleLineSearch} error={error} /> : <Redirect to=\"/\" />} />\n                <Route path=\"/byidline/directions\" render={() => logic.isUserLoggedIn ? <StopLine2 lang={lang} items={directions} onSearch={handleDirectionSearch} error={error} /> : <Redirect to=\"/\" />} />\n                <Route path=\"/byidline/stops\" render={() => logic.isUserLoggedIn ? <StopLine3 lang={lang} items={lines} onSearch={handleStopSearch} error={error} /> : <Redirect to=\"/\" />} />\n                <Route path=\"/byidline/results\" render={() => logic.isUserLoggedIn ? <ResultsLine lang={lang} onFav={handleFav} stop={stop} error={error} favs={favs}/> : <Redirect to=\"/\" />} />\n                <Redirect to=\"/\" />\n            </Switch>\n        </main>\n    }\n}\n\nexport default withRouter(LineSearch)"]},"metadata":{},"sourceType":"module"}