{"ast":null,"code":"var _jsxFileName = \"/Users/didactor/Documents/skylab/bootcamp/collab/skylab-bootcamp-201904/staff/groups/aldi/siempre-tarde/src/componets/App.js\";\nimport React, { Component } from 'react';\nimport i18n from '../common/i18n';\nimport LanguageSelector from './LanguageSelector';\nimport Landing from './Landing';\nimport Register from './Register';\nimport Login from './Login';\nimport logic from '../logic';\nimport Home from './Home';\nimport StopCode from './StopCode';\nimport StopLine from './StopLine';\nimport Results from './Results';\nimport { Route, withRouter, Redirect, Switch } from 'react-router-dom';\nimport Favorites from './Favorites';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      lang: i18n.language,\n      visible: null,\n      error: null,\n      name: null\n    };\n\n    this.handleLanguageChange = lang => this.setState({\n      lang: i18n.language = lang\n    });\n\n    this.handleRegisterNavigation = () => this.props.history.push('/register');\n\n    this.handleLoginNavigation = () => this.props.history.push('/login');\n\n    this.handleLogin = (username, password) => {\n      try {\n        logic.loginUser(username, password).then(() => logic.retrieveUser()).then(({\n          name\n        }) => {\n          this.setState({\n            name,\n            error: null\n          }, () => this.props.history.push('/home'));\n        }).catch(error => this.setState({\n          error: error.message\n        }));\n      } catch (_ref) {\n        let message = _ref.message;\n        this.setState({\n          error: message\n        });\n      }\n    };\n\n    this.handleRegister = (name, surname, username, password, password2) => {\n      try {\n        logic.registerUser(name, surname, username, password, password2).then(() => {\n          this.setState({\n            error: null\n          }, () => this.props.history.push('/login'));\n        }).catch(error => {\n          this.setState({\n            error: error.message\n          });\n        });\n      } catch (_ref2) {\n        let message = _ref2.message;\n        this.setState({\n          error: message\n        });\n      }\n    };\n\n    this.handleStopCode = () => {\n      this.setState(() => this.props.history.push('/byidstop'));\n    };\n\n    this.handleStopCode = () => {\n      this.setState(() => this.props.history.push('/byidline'));\n    };\n\n    this.handleFavorites = () => {\n      this.setState(() => this.props.history.push('/favoritestops'));\n    };\n\n    this.handleLogout = () => {\n      logic.logoutUser();\n      this.props.history.push('/');\n    };\n  }\n\n  componentDidMount() {\n    logic.isUserLoggedIn && logic.retrieveUser().then(user => this.setState({\n      name: user.name\n    })).catch(error => this.setState({\n      error: error.message\n    }));\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.location !== prevProps.location) this.setState({\n      visible: null\n    });\n  }\n\n  render() {\n    const _this$state = this.state,\n          lang = _this$state.lang,\n          error = _this$state.error,\n          name = _this$state.name,\n          handleLanguageChange = this.handleLanguageChange,\n          handleRegisterNavigation = this.handleRegisterNavigation,\n          handleLoginNavigation = this.handleLoginNavigation,\n          handleLogin = this.handleLogin,\n          handleRegister = this.handleRegister,\n          handleLogout = this.handleLogout,\n          handleStopCode = this.handleStopCode,\n          handleLineCode = this.handleLineCode,\n          handleFavorites = this.handleFavorites;\n    return React.createElement(React.Fragment, null, React.createElement(LanguageSelector, {\n      lang: lang,\n      onLanguageChange: handleLanguageChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => logic.isUserLoggedIn ? React.createElement(Redirect, {\n        to: \"/home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }) : React.createElement(Landing, {\n        lang: lang,\n        onRegister: handleRegisterNavigation,\n        onLogin: handleLoginNavigation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/register\",\n      render: () => logic.isUserLoggedIn ? React.createElement(Redirect, {\n        to: \"/home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }) : React.createElement(Register, {\n        lang: lang,\n        onRegister: handleRegister,\n        error: error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/login\",\n      render: () => logic.isUserLoggedIn ? React.createElement(Redirect, {\n        to: \"/home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }) : React.createElement(Login, {\n        lang: lang,\n        onLogin: handleLogin,\n        error: error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/home\",\n      render: () => logic.isUserLoggedIn ? React.createElement(Home, {\n        lang: lang,\n        onStopCode: handleStopCode,\n        onLineCode: handleLineCode,\n        onFavorites: handleFavorites,\n        onLogout: handleLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }) : React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/byidstop\",\n      render: () => logic.isUserLoggedIn ? React.createElement(StopCode, {\n        lang: lang,\n        name: name,\n        onStopCode: handleLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }) : React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/byidline\",\n      render: () => logic.isUserLoggedIn ? React.createElement(StopLine, {\n        lang: lang,\n        name: name,\n        onStopCode: handleLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }) : React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/favoritestops\",\n      render: () => logic.isUserLoggedIn ? React.createElement(Favorites, {\n        lang: lang,\n        name: name,\n        onStopCode: handleLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }) : React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/didactor/Documents/skylab/bootcamp/collab/skylab-bootcamp-201904/staff/groups/aldi/siempre-tarde/src/componets/App.js"],"names":["React","Component","i18n","LanguageSelector","Landing","Register","Login","logic","Home","StopCode","StopLine","Results","Route","withRouter","Redirect","Switch","Favorites","App","state","lang","language","visible","error","name","handleLanguageChange","setState","handleRegisterNavigation","props","history","push","handleLoginNavigation","handleLogin","username","password","loginUser","then","retrieveUser","catch","message","handleRegister","surname","password2","registerUser","handleStopCode","handleFavorites","handleLogout","logoutUser","componentDidMount","isUserLoggedIn","user","componentDidUpdate","prevProps","location","render","handleLineCode"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport i18n from '../common/i18n'\nimport LanguageSelector from './LanguageSelector'\nimport Landing from './Landing'\nimport Register from './Register'\nimport Login from './Login'\nimport logic from '../logic'\nimport Home from './Home';\nimport StopCode from './StopCode';\nimport StopLine from './StopLine';\nimport Results from './Results';\nimport { Route, withRouter, Redirect, Switch } from 'react-router-dom'\nimport Favorites from './Favorites';\n\n\n\nclass App extends Component {\n    state = { lang: i18n.language, visible: null, error: null, name: null }\n\n    handleLanguageChange = lang => this.setState({ lang: i18n.language = lang })\n\n    handleRegisterNavigation = () => this.props.history.push('/register')\n\n    handleLoginNavigation = () => this.props.history.push('/login')\n\n    handleLogin = (username, password) => {\n        try {\n            logic.loginUser(username, password)\n                .then(() =>\n                    logic.retrieveUser()\n                )\n                .then(({ name }) => {\n                    this.setState({ name, error: null }, () => this.props.history.push('/home'))\n                })\n                .catch(error =>\n                    this.setState({ error: error.message })\n                )\n        } catch ({ message }) {\n            this.setState({ error: message })\n        }\n    }\n\n    componentDidMount() {\n        logic.isUserLoggedIn &&\n            logic.retrieveUser()\n                .then(user =>\n                    this.setState({ name: user.name })\n                )\n                .catch(error =>\n                    this.setState({ error: error.message })\n                )\n    }\n\n    handleRegister = (name, surname, username, password, password2) => {\n        try {\n\n            logic.registerUser(name, surname, username, password, password2)\n                .then(() =>{\n                    this.setState({ error: null },() => this.props.history.push('/login'))\n                })\n                .catch(error =>{\n                    this.setState({ error: error.message })\n                })\n        } catch ({ message }) {\n            this.setState({ error: message })\n        }\n    }\n    handleStopCode = () => {\n\n        this.setState(() => this.props.history.push('/byidstop'))\n    }\n    handleStopCode = () => {\n\n        this.setState(() => this.props.history.push('/byidline'))\n    }\n    handleFavorites = () => {\n\n        this.setState(() => this.props.history.push('/favoritestops'))\n    }\n\n    handleLogout = () => {\n        logic.logoutUser()\n\n        this.props.history.push('/')\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.location !== prevProps.location) this.setState({ visible: null })\n    }\n\n    render() {\n        const {\n            state: { lang, error, name},\n            handleLanguageChange,\n            handleRegisterNavigation,\n            handleLoginNavigation,\n            handleLogin,\n            handleRegister,\n            handleLogout,\n            handleStopCode,\n            handleLineCode,\n            handleFavorites\n        } = this\n\n        return <>\n            <LanguageSelector lang={lang} onLanguageChange={handleLanguageChange} />\n\n            <Switch>\n                <Route exact path=\"/\" render={() => logic.isUserLoggedIn ? <Redirect to=\"/home\" /> : <Landing lang={lang} onRegister={handleRegisterNavigation} onLogin={handleLoginNavigation} />} />\n\n                <Route path=\"/register\" render={() => logic.isUserLoggedIn ? <Redirect to=\"/home\" /> :<Register lang={lang} onRegister={handleRegister} error={error}/>} />\n\n                <Route path=\"/login\" render={() => logic.isUserLoggedIn ? <Redirect to=\"/home\" /> : <Login lang={lang} onLogin={handleLogin} error={error} />} />\n\n                <Route path=\"/home\" render={() => logic.isUserLoggedIn ? <Home lang={lang} onStopCode={handleStopCode} onLineCode={handleLineCode} onFavorites={handleFavorites} onLogout={handleLogout} /> : <Redirect to=\"/\" />} />\n                \n                <Route path=\"/byidstop\" render={() => logic.isUserLoggedIn ? <StopCode lang={lang} name={name} onStopCode={handleLogout} /> : <Redirect to=\"/\" />} />\n\n                <Route path=\"/byidline\" render={() => logic.isUserLoggedIn ? <StopLine lang={lang} name={name} onStopCode={handleLogout} /> : <Redirect to=\"/\" />} />\n\n                <Route path=\"/favoritestops\" render={() => logic.isUserLoggedIn ? <Favorites lang={lang} name={name} onStopCode={handleLogout} /> : <Redirect to=\"/\" />} />\n\n\n                <Redirect to=\"/\" />\n            </Switch>\n        </>\n    }\n}\n\nexport default withRouter(App)"]},"metadata":{},"sourceType":"module"}