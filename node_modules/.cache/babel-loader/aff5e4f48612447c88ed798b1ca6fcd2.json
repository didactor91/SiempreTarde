{"ast":null,"code":"var _jsxFileName = \"/Users/didactor/Documents/skylab/bootcamp/collab/skylab-bootcamp-201904/staff/groups/aldi/siempre-tarde/src/componets/CodeSearch/index.js\";\nimport React, { Component } from 'react';\nimport literals from './literals';\nimport Results from '../Results';\nimport { Route, withRouter, Redirect, Switch, Link } from 'react-router-dom';\nimport logic from '../../logic';\nimport StopCode from '../StopCode';\n\nclass CodeSearch extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      error: null,\n      line: null,\n      lines: [],\n      stop: null,\n      favs: []\n    };\n\n    this.handleSearch = stop_id => logic.upcomingBusesByStop(stop_id).then(lines => {\n      return logic.retrieveFavStops().then(favs => this.setState({\n        error: null,\n        line: null,\n        favs,\n        lines,\n        stop: stop_id\n      }, () => this.props.history.push('/byidstop/results')));\n    }).catch(error => this.setState({\n      error: error.message\n    }));\n\n    this.handleFav = id => logic.toggleFavStop(id).then(() => logic.retrieveFavStops()).then(favs => this.setState({\n      favs\n    }));\n  }\n\n  render() {\n    const handleSearch = this.handleSearch,\n          handleFav = this.handleFav,\n          _this$state = this.state,\n          lines = _this$state.lines,\n          error = _this$state.error,\n          stop = _this$state.stop,\n          favs = _this$state.favs,\n          lang = this.props.lang;\n    const back = literals[lang].back;\n    return React.createElement(\"main\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/byidstop\",\n      render: () => logic.isUserLoggedIn ? React.createElement(StopCode, {\n        lang: lang,\n        onSearch: handleSearch,\n        error: error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }) : React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/byidstop/results\",\n      render: () => logic.isUserLoggedIn ? React.createElement(Results, {\n        lang: lang,\n        items: lines,\n        onFav: handleFav,\n        stop: stop,\n        error: error,\n        favs: favs,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }) : React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }), React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default withRouter(CodeSearch);","map":{"version":3,"sources":["/Users/didactor/Documents/skylab/bootcamp/collab/skylab-bootcamp-201904/staff/groups/aldi/siempre-tarde/src/componets/CodeSearch/index.js"],"names":["React","Component","literals","Results","Route","withRouter","Redirect","Switch","Link","logic","StopCode","CodeSearch","state","error","line","lines","stop","favs","handleSearch","stop_id","upcomingBusesByStop","then","retrieveFavStops","setState","props","history","push","catch","message","handleFav","id","toggleFavStop","render","lang","back","isUserLoggedIn"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport literals from './literals'\nimport Results from '../Results'\nimport { Route, withRouter, Redirect, Switch, Link } from 'react-router-dom'\nimport logic from '../../logic';\nimport StopCode from '../StopCode';\n\nclass CodeSearch extends Component {\n    state = { error: null, line: null, lines: [], stop: null, favs:[] }\n\n    handleSearch = stop_id =>\n        logic.upcomingBusesByStop(stop_id)\n            .then((lines) =>{\n        \n                return logic.retrieveFavStops()\n            .then(favs => this.setState({ error: null, line: null, favs, lines, stop: stop_id }, () => this.props.history.push('/byidstop/results')))\n            })\n            .catch(error =>\n                this.setState({ error: error.message })\n            )\n\n    handleFav = id =>\n        logic.toggleFavStop(id)\n            .then(() => logic.retrieveFavStops())\n            .then(favs => this.setState({ favs }))\n\n    render() {\n        const {\n            handleSearch,\n            handleFav,\n            state: { lines, error, stop, favs },\n            props: { lang }\n        } = this\n\n        const { back } = literals[lang]\n\n        return <main>\n            <Switch>\n                <Route exact path=\"/byidstop\" render={() => logic.isUserLoggedIn ? <StopCode lang={lang} onSearch={handleSearch} error={error} /> : <Redirect to=\"/\" />} />\n                <Route path=\"/byidstop/results\" render={() => logic.isUserLoggedIn ? <Results lang={lang} items={lines} onFav={handleFav} stop={stop} error={error} favs={favs}/> : <Redirect to=\"/\" />} />\n                <Redirect to=\"/\" />\n            </Switch>\n        </main>\n    }\n}\n\nexport default withRouter(CodeSearch)"]},"metadata":{},"sourceType":"module"}